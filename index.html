<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modern ID Card Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Libre+Barcode+39+Text&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
      :root {
        --saffron: #ff9933;
        --white: #ffffff;
        --green: #138808;
        --navy: #000080;
        --dark-text: #34495e;
        --light-text: #7f8c8d;
        --background: #f4f7f6;
        --border-color: #e0e4e2;
        --shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background-color: var(--background);
        color: var(--dark-text);
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        box-sizing: border-box;
      }
      #formPage,
      #cardPage {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      #cardPage {
        display: none;
      }
      .form-container {
        background: var(--white);
        padding: 30px 40px;
        border-radius: 16px;
        box-shadow: var(--shadow);
        width: 100%;
        max-width: 450px;
        text-align: center;
      }
      .form-container h1 {
        margin-top: 0;
        margin-bottom: 30px;
        font-weight: 700;
      }
      .form-group {
        margin-bottom: 22px;
        text-align: left;
      }
      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #555;
      }
      input[type="text"],
      input[type="date"] {
        width: 100%;
        padding: 12px 15px;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        font-family: "Poppins", sans-serif;
        font-size: 16px;
        transition: border-color 0.3s, box-shadow 0.3s;
      }
      input:focus {
        outline: none;
        border-color: var(--saffron);
        box-shadow: 0 0 0 3px rgba(255, 153, 51, 0.2);
      }

      .upload-area {
        width: 100%;
        padding: 30px;
        border: 2px dashed var(--border-color);
        border-radius: 12px;
        background-color: #fafafa;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s, border-color 0.3s;
        box-sizing: border-box;
      }
      .upload-area:hover,
      .upload-area.drag-over {
        background-color: #f0f0f0;
        border-color: var(--saffron);
      }
      .upload-area-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        color: var(--light-text);
      }
      .upload-icon {
        width: 40px;
        height: 40px;
        color: var(--saffron);
      }
      .upload-area p {
        margin: 0;
        font-weight: 500;
      }
      .upload-area span {
        font-size: 12px;
      }
      #photo-input {
        display: none;
      }
      #file-preview {
        display: none;
        align-items: center;
        gap: 15px;
      }
      #preview-image {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        object-fit: cover;
      }
      #file-name {
        font-size: 14px;
        font-weight: 500;
        color: var(--dark-text);
        text-align: left;
      }

      .primary-btn {
        width: 100%;
        margin-top: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-family: "Poppins", sans-serif;
        font-weight: 600;
        font-size: 18px;
        padding: 14px 25px;
        border-radius: 10px;
        border: 2px solid transparent;
        cursor: pointer;
        transition: all 0.3s ease;
        background-color: var(--saffron);
        color: white;
      }
      .primary-btn:hover {
        background-color: #e68a2e;
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(255, 153, 51, 0.3);
      }
      .primary-btn:active {
        transform: translateY(-1px);
      }

      #idCard {
        /* Width increased by 4px as requested */
        width: 379px;
        border-radius: 18px;
        box-shadow: var(--shadow);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        background: var(--white);
      }
      .card-header {
        background: var(--saffron);
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--navy);
        text-align: center;
        border-bottom: 2px solid rgba(0, 0, 0, 0.1);
      }
      .emblem {
        width: 60px;
        height: auto;
        margin-right: 20px;
      }
      .header-text h2 {
        margin: 0;
        font-size: 19px;
        font-weight: 700;
      }
      .header-text p {
        margin: 0;
        font-size: 15px;
        font-weight: 500;
      }
      .card-body {
        display: flex;
        padding: 25px;
        gap: 20px;
      }
      .photo-section {
        width: 110px;
        flex-shrink: 0;
        text-align: center;
      }
      #cardPhoto {
        width: 110px;
        height: 130px;
        object-fit: cover;
        object-position: center;
        border-radius: 12px;
        border: 4px solid var(--background);
      }
      .info-section {
        flex-grow: 1;
      }
      #cardName {
        font-size: 20px;
        font-weight: 700;
        color: var(--dark-text);
        margin-top: 0;
        margin-bottom: 18px;
        line-height: 1.2;
      }
      .info-grid {
        display: grid;
        grid-template-columns: 84px auto;
        gap: 12px;
      }
      .info-grid > span {
        font-size: 13px;
      }
      .info-grid > .label {
        font-weight: 500;
        color: var(--light-text);
      }
      .info-grid > .value {
        font-weight: 500;
        color: var(--dark-text);
      }
      .card-footer {
        background: var(--green);
        color: white;
        padding: 15px 20px;
        text-align: center;
      }
      .quote {
        font-style: italic;
        font-size: 12px;
        margin: 0 0 10px 0;
        opacity: 0.9;
      }
      .barcode {
        font-family: "Libre Barcode 39 Text", cursive;
        font-size: 52px;
        line-height: 1;
        color: var(--white);
      }

      .card-actions {
        margin-top: 30px;
        display: flex;
        gap: 15px;
      }
      .card-actions button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        font-family: "Poppins", sans-serif;
        font-weight: 500;
        font-size: 16px;
        padding: 12px 25px;
        border-radius: 10px;
        border: 2px solid transparent;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .card-actions button:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .card-actions button:active {
        transform: translateY(-1px);
      }
      .card-actions button svg {
        width: 20px;
        height: 20px;
      }
      #downloadBtn {
        background-color: var(--green);
        color: white;
      }
      #downloadBtn:hover {
        background-color: #179a09;
      }
      #backBtn {
        background-color: var(--white);
        color: var(--light-text);
        border-color: var(--border-color);
      }
      #backBtn:hover {
        border-color: var(--light-text);
        color: var(--dark-text);
      }
    </style>
  </head>
  <body>
    <div id="formPage">
      <div class="form-container">
        <h1>Identity Card Generator</h1>
        <form id="idForm">
          <div class="form-group">
            <label for="name">Full Name</label
            ><input
              type="text"
              id="name"
              placeholder="e.g., Aarav Sharma"
              required
            />
          </div>
          <div class="form-group">
            <label for="dob">Date of Birth</label
            ><input type="date" id="dob" required />
          </div>
          <div class="form-group">
            <label for="city">City / Place</label
            ><input
              type="text"
              id="city"
              placeholder="e.g., Navi Mumbai"
              required
            />
          </div>
          <div class="form-group">
            <label>Your Photo</label>
            <label for="photo-input" class="upload-area" id="upload-area">
              <div class="upload-area-content" id="upload-prompt">
                <svg
                  class="upload-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"
                  />
                </svg>
                <p>Drag & drop image here</p>
                <span>or click to browse</span>
              </div>
              <div id="file-preview">
                <img id="preview-image" src="#" alt="Image preview" />
                <p id="file-name"></p>
              </div>
            </label>
            <input type="file" id="photo-input" accept="image/*" />
          </div>
          <button
            type="button"
            class="primary-btn"
            id="generateBtn"
            onclick="generateID()"
          >
            Generate ID Card
          </button>
        </form>
      </div>
    </div>
    <div id="cardPage">
      <div id="idCard">
        <div class="card-header">
          <img
          src="icon.png"
            class="emblem"
            alt="National Emblem"
          />
          <div class="header-text">
            <h2>Republic of India</h2>
            <p>भारत गणराज्य</p>
          </div>
        </div>
        <div class="card-body">
          <div class="photo-section">
            <img id="cardPhoto" src="" alt="Profile Photo" />
          </div>
          <div class="info-section">
            <h3 id="cardName"></h3>
            <div class="info-grid">
              <span class="label">ID Number</span
              ><span class="value" id="cardIdNumber"></span>
              <span class="label">Date of Birth</span
              ><span class="value" id="cardDob"></span>
              <span class="label">Place</span
              ><span class="value" id="cardCity"></span>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <p class="quote" id="cardQuote"></p>
          <div class="barcode" id="cardBarcode"></div>
        </div>
      </div>
      <div class="card-actions">
        <button id="backBtn" onclick="goBack()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"
            />
          </svg>
          <span>Go Back</span>
        </button>
        <button id="downloadBtn" onclick="downloadID()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"
            />
          </svg>
          <span>Download</span>
        </button>
      </div>
    </div>

    <script>
      const quotes = [
        "Satyameva Jayate – Truth Alone Triumphs",
        "Jai Hind – Victory to India",
        "Vande Mataram – I Bow to Thee, Mother",
        "Swaraj is my birthright and I shall have it.",
        "You must be the change you wish to see in the world.",
        "Service to humanity is service to God.",
        "Arise, awake, and stop not till the goal is reached.",
      ];
      const formPage = document.getElementById("formPage"),
        cardPage = document.getElementById("cardPage"),
        idForm = document.getElementById("idForm");
      const uploadArea = document.getElementById("upload-area"),
        photoInput = document.getElementById("photo-input"),
        uploadPrompt = document.getElementById("upload-prompt"),
        filePreview = document.getElementById("file-preview"),
        previewImage = document.getElementById("preview-image"),
        fileName = document.getElementById("file-name");
      let uploadedFile = null;

      ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) =>
        uploadArea.addEventListener(eventName, preventDefaults, false)
      );
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      ["dragenter", "dragover"].forEach((eventName) =>
        uploadArea.addEventListener(
          eventName,
          () => uploadArea.classList.add("drag-over"),
          false
        )
      );
      ["dragleave", "drop"].forEach((eventName) =>
        uploadArea.addEventListener(
          eventName,
          () => uploadArea.classList.remove("drag-over"),
          false
        )
      );
      uploadArea.addEventListener("drop", handleDrop, false);
      photoInput.addEventListener("change", handleChange, false);

      function handleDrop(e) {
        handleFile(e.dataTransfer.files[0]);
      }
      function handleChange(e) {
        handleFile(e.target.files[0]);
      }

      function handleFile(file) {
        if (file && file.type.startsWith("image/")) {
          uploadedFile = file;
          fileName.textContent = file.name;
          const reader = new FileReader();
          reader.onload = (e) => {
            previewImage.src = e.target.result;
          };
          reader.readAsDataURL(file);
          uploadPrompt.style.display = "none";
          filePreview.style.display = "flex";
        } else {
          alert("Please upload a valid image file.");
        }
      }

      function generateID() {
        const name = document.getElementById("name").value.trim(),
          dob = document.getElementById("dob").value,
          city = document.getElementById("city").value.trim();
        if (!name || !dob || !city || !uploadedFile) {
          alert("Please fill all fields and upload a photo.");
          return;
        }
        const idNumber = "ID" + Math.floor(100000 + Math.random() * 900000);
        document.getElementById("cardName").innerText = name;
        document.getElementById("cardIdNumber").innerText = `: ${idNumber}`;
        document.getElementById("cardDob").innerText = `: ${dob}`;
        document.getElementById("cardCity").innerText = `: ${city}`;
        document.getElementById("cardQuote").innerText = `"${
          quotes[Math.floor(Math.random() * quotes.length)]
        }"`;
        document.getElementById("cardBarcode").innerText = `*${idNumber}*`;
        const reader = new FileReader();
        reader.onload = function (e) {
          document.getElementById("cardPhoto").src = e.target.result;
          formPage.style.display = "none";
          cardPage.style.display = "flex";
        };
        reader.readAsDataURL(uploadedFile);
      }

      function downloadID() {
        const cardElement = document.getElementById("idCard"),
          downloadBtn = document.getElementById("downloadBtn");
        downloadBtn.disabled = true;
        downloadBtn.querySelector("span").innerText = "Processing...";
        html2canvas(cardElement, {
          backgroundColor: null,
          scale: 3,
          useCORS: true,
        })
          .then((canvas) => {
            const link = document.createElement("a");
            const userName = document
              .getElementById("name")
              .value.trim()
              .replace(/\s+/g, "_");
            link.download = `ID-Card-${userName || "user"}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
          })
          .catch((error) => {
            console.error("Download failed:", error);
            alert("An error occurred during download.");
          })
          .finally(() => {
            downloadBtn.disabled = false;
            downloadBtn.querySelector("span").innerText = "Download";
          });
      }

      function goBack() {
        cardPage.style.display = "none";
        formPage.style.display = "flex";
        idForm.reset();
        uploadedFile = null;
        uploadPrompt.style.display = "flex";
        filePreview.style.display = "none";
        previewImage.src = "#";
      }
    </script>
  </body>
</html>
